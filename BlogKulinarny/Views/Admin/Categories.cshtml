@model CategoryViewModel

@{Layout = "~/Views/Shared/_Panel_Layout.cshtml";}

<div class="container-fluid mt-3">
    <div class="row gy-3">
        <div class="col-12">
            <form asp-controller="Admin" asp-action="addCategory" method="post">
                <div class="row">
                    <div class="col-auto text-truncate">
                        <label class="">Dodaj kategorie:</label>
                    </div>
                    <div class="col">
                        <input type="text" class="form-control" id="newCategory" asp-for="_newCategory">
                    </div>
                    <div class="col-auto">
                        <button type="submit" class="btn btn-success">Dodaj</button>
                    </div>
                </div>
            </form>
        </div>
        @foreach (var cat in Model._categories)
        {
        <div class="col-12">
            <div class="border border-warning border-2 border-primary rounded-3 p-3 shadow bg-light bg-opacity-25">
                <div class="row gy-3">
                    <!-- Info -->
                    <div class="col-5 col-lg-6 col-xl-7">
                        <div class="py-2 text-truncate fw-bold" title="Nazwa użytkownika">
                            @cat.name
                        </div>
                    </div>
                    <!-- Przyciski -->
                        <div class="col-7 col-lg-6 col-xl-5">
                        <div class="row gx-3">
                            <div class="col-7 d-grid">
                                @if (cat.isAccepted == false)
                                {
                                    <form asp-controller="Admin" asp-action="unlockCategory" method="post">
                                        <div class="d-grid">
                                            <input type="hidden" value="@cat.id" id="Catunlock" asp-for="_id" />
                                            <button type="submit" class="btn btn-success text-nowrap">Odblokuj</button>
                                        </div>
                                    </form>
                                }
                                @if (cat.isAccepted == true)
                                {
                                    <form asp-controller="Admin" asp-action="lockCategory" method="post">
                                        <div class="d-grid">
                                            <input type="hidden" value="@cat.id" id="Catunlock" asp-for="_id" />
                                            <button type="submit" class="btn btn-danger text-nowrap">Zablokuj</button>
                                        </div>
                                    </form>
                                }
                            </div>
                            <div class="col-5 d-grid">
                                <form asp-controller="Admin" asp-action="deleteCategory" method="post">
                                    <div class="d-grid">
                                        <input type="hidden" value="@cat.id" id="Catunlock" asp-for="_id" />
                                        <button type="submit" class="btn btn-warning text-nowrap">Usuń</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        }
    </div>
</div>